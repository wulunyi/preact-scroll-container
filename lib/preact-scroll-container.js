(function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("preact")):"function"==typeof define&&define.amd?define("ScrollContainer",["preact"],e):"object"==typeof exports?exports.ScrollContainer=e(require("preact")):t.ScrollContainer=e(t.preact)})(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(e,r){e.exports=t},function(t,e,r){"use strict";function n(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0,e.default=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},h=r(0),c=1e3,u=function(t){function e(r){i(this,e);var n=o(this,t.call(this,r));return n.handleTouchStart=n.handleTouchStart.bind(n),n.handleTouchMove=n.handleTouchMove.bind(n),n.handleTouchEnd=n.handleTouchEnd.bind(n),n.startX=0,n.endX=0,n.diffX=0,n.startTimer=0,n.endTimer=0,n.diffTimer=0,n.soft=n.props.soft||!1,n.moving=!0,n.DOM=null,n.currentPage=+n.props.currentPage||0,n.totalPage=+n.props.totalPage||0,n.currentTransform=n.currentPage*document.body.clientWidth*-1,n}return s(e,t),e.prototype.componentDidMount=function(){this.updateTransform()},e.prototype.updateTransform=function(){var t=this.DOM.children[0];this.setTransition(t,0).setTransform(t,this.currentTransform)},e.prototype.componentWillReceiveProps=function(t){var e=t.currentPage,r=t.totalPage,n=!1;e!=this.props.currentPage&&(n=!0,this.currentPage=e,this.currentTransform=this.currentPage*document.body.clientWidth*-1),r!=this.props.totalPage&&(n=!0,this.totalPage=r),n&&this.updateTransform()},e.prototype.handleTouchStart=function(t){var e=t.currentTarget.children[0];this.startX=t.changedTouches[0].pageX,this.diffX=0,this.startTimer=Date.now(),this.diffTimer=0,this.setTransition(e,0)},e.prototype.handleTouchMove=function(t){var e=t.currentTarget.children[0];return this.endX=t.changedTouches[0].pageX,this.diffX=this.endX-this.startX,0==this.currentPage&&this.diffX>0||this.currentPage==this.totalPage-1&&this.diffX<0?(this.diffX=this.diffX/2,this.moving=!1):(this.moving=!0,t.stopPropagation()),(this.moving||this.soft)&&this.setTransform(e,this.diffX+this.currentTransform),t.preventDefault(),!1},e.prototype.handleTouchEnd=function(t){if(this.moving&&t.stopPropagation(),this.moving||this.soft){var e=t.currentTarget.children[0],r=document.body.clientWidth/2;this.endX=t.changedTouches[0].pageX,this.diffX=this.endX-this.startX,this.endTimer=Date.now(),this.diffTimer=this.endTimer-this.startTimer,Math.abs(this.diffX)>10&&(this.diffTimer>5e3?this.diffX<-1*r?this.currentPage=this.currentPage-1<0?0:this.currentPage-1:this.diffX>r&&(this.currentPage=this.currentPage+1>=this.totalPage?this.totalPage-1:this.currentPage+1):this.diffX/this.diffTimer>.1?this.currentPage=this.currentPage-1<0?0:this.currentPage-1:this.diffX/this.diffTimer<-.1&&(this.currentPage=this.currentPage+1>=this.totalPage?this.totalPage-1:this.currentPage+1),this.slider(this.currentPage,this.diffX/this.diffTimer,e))}},e.prototype.slider=function(t,e,r){var n=Math.abs(Math.abs(parseInt(c*e))-.5);n=n>300?300:n;var i=t*document.body.clientWidth*-1;i!==this.currentTransform&&this.props.onChange&&this.props.onChange(this.currentPage),this.setTransition(r,n).setTransform(r,i),this.currentTransform=i},e.prototype.setTransition=function(t,e){return t.style.webkitTransition="-webkit-transform "+e+"ms ease-in",t.style.transition="transform "+e+"ms ease-in",this},e.prototype.setTransform=function(t,e){return t.style.webkitTransform="translate3D("+e+"px,0,0)",t.style.transform="translate3D("+e+"px,0,0)",this},e.prototype.render=function(t,e){var r=this,i=t.children,o=n(t,["children"]);return(0,h.h)("div",a({},o,{onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,ref:function(t){r.DOM=t}}),i)},e}(h.Component);e.default=u}])});